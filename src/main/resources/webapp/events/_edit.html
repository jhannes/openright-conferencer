
<div id="eventPlaceholder"></div>


<script id="eventFormTemplate" type="template">
<form onsubmit="updateEvent(event)">
  <input type="hidden" name="event[slug]" value="{{slug}}" />
  <h2>Update {{title}}</h2>

  <p>Let's do some modifications</p>

  <h3>Add collaborators</h3>

  <label>
    Email:
	<input type="email" name="event[collaborators][][email]" placeholder="Collaborator email" required />
  </label>
  </div>

  <button>
	Save
  </botton>
</form>
</script>



<script>
function updateEvent(event) {
  event.preventDefault();
  var form = $(event.target).serializeObject();
  events.update(form).then(function() {
    window.location.hash = "profile";    
    notify("confirm", "Updated");
  });
  return false;
}

$(function() {
  	var slug = window.location.hash.substring(1).split(/\//)[1];
  
	var eventFormTemplate = Handlebars.compile($("#eventFormTemplate").html());
	events.get(slug).then(function(data) {
  		$("#eventPlaceholder").html(eventFormTemplate(data));
	});
});
</script>
